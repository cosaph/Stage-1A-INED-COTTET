{
  "hash": "c1cffc14f794204f516e134bac3c46c2",
  "result": {
    "markdown": "---\ntitle: \" Afficher des cartes interactives avec Mapview et Oceanis\"\ntoc-title: \"\"\ncategories:\n  - R\n  - R-Studio\nauthor: \"COTTET Coralie\"\naffiliations: INED\n\ndate: 06/06/2023\n\ncss: \"sms.css\"\n---\n\n\nNous allons vous présenter trois packages permettant de générer des cartes interactives : __sf__ , __mapview___. \nIl faut donc au préalable installer ces deux packages. \ninstall.packages(\"sf\")\ninstall.packages(\"mapview\")\ninstall.packages(\"stringr\") #qui sera utilisé pour traiter les données. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"sf\")\nlibrary(\"mapview\")\nlibrary(\"stringr\")\n```\n:::\n\n\nDans un premier temps nous allons travailler avc __mapview__qui est une bibliothèque R qui permet d'afficher des données géospatiales interactives et de les explorer facilement. Elle offre une interface graphique conviviale qui permet de zoomer, de déplacer et de sélectionner des données géospatiales à l'aide de la souris. \n\n_Nous décidons de travailler sur Paris tout au long de ce tuto._\n\n1. On télécharge les données des arrondissements de Paris à partir du site opendata.paris.fr et stocke les données dans l'objet arrondissements sous forme d'un objet de type sf _(spatial)_.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Télécharger les données des arrondissements de Paris\narrondissements <- st_read(dsn = \"https://opendata.paris.fr/explore/dataset/arrondissements/download/?format=geojson&timezone=Europe/Berlin&lang=fr\")\n```\n:::\n\n2. On convertit l'objet en un dataframe pour pouvoir travailler dessus. \n\n::: {.cell}\n\n```{.r .cell-code}\n# Convertir l'objet sf en un data.frame\narrondissements_df <- st_drop_geometry(arrondissements)\n```\n:::\n\n3. On supprime les colonnes qui ne sont pas nécessaires pour la représentation spatiale.\n\n::: {.cell}\n\n```{.r .cell-code}\n# Supprimer les colonnes qui ne sont pas nécessaires pour la représentation spatiale\ncols_to_remove <- c(\"datasetid\", \"recordid\", \"fields\", \"geometry_name\", \"type\")\narrondissements_df <- arrondissements_df[, !(names(arrondissements_df) %in% cols_to_remove)]\n```\n:::\n\n4. On convertit les colonnes de type list en caractère et la liste en dataframe/\n\n::: {.cell}\n\n```{.r .cell-code}\n# Convertir les colonnes de type list en caractère\narrondissements_df <- lapply(arrondissements_df, function(x) if (is.list(x)) as.character(x) else x)\n\n# Convertir la liste en data.frame\narrondissements_df <- as.data.frame(arrondissements_df)\n```\n:::\n\n5. On crée un exemple de données df composé de deux colonnes : 'id' et 'coordinates' (géocode et coordonées spatiale de chaque arrondissement.\n\nMes données sont sous la forme d'un vecteur c(a,b). Pour travailler plus simplement je travaille sur la colonne avec le vecteur en question pour créer deux colonnes latitude et longitude.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Exemple de données\ndf <- data.frame(id = c(1, 2), coordinates = arrondissements_df$geom_x_y)\n\n\n# Diviser la chaîne de caractères à la virgule et extraire la deuxième partie\ncoord_vec <- as.data.frame(strsplit(df$coordinates, \",\"))\ncoord_vec[1,] <- gsub(\"c\", \"\", coord_vec[1,]) # je supprime le c\ncoord_vec[1,] <- gsub('\\\\(', \"\", coord_vec[1,]) # je supprime la parenthèse\ncoord_vec[2,] <- gsub('\\\\)', \"\", coord_vec[2,])\n\n\ncoord_vec[1,]<- as.numeric(coord_vec[1,])\n\ncoord_vec[2,]<- as.numeric(coord_vec[2,])\n\n\ncoord_vec_tranposee<-t(coord_vec)\n\n# Afficher le résultat\narrondissements_df$lon<-coord_vec_tranposee[,1]\narrondissements_df$lat<-coord_vec_tranposee[,2]\n```\n:::\n\n6 . L'affichage de la carte interactive \n\narrondissements_df est un data.frame qui contient des informations sur les arrondissements de Paris. Les colonnes lat et lon contiennent les coordonnées géographiques des centres de chaque arrondissement.\n\nLe paramètre crs est utilisé pour spécifier le système de coordonnées de référence (en l'occurrence, ici, le code EPSG 4326 qui correspond aux coordonnées géographiques de latitude et longitude).\n\nLa fonction mapview() prend en entrée l'objet sf arrondissements_sf, ainsi que le nom des colonnes à utiliser pour représenter les données (zcol).\nDans cet exemple, les colonnes c_ar et l_aroff sont utilisées pour définir la couleur et l'étiquette de chaque arrondissement.\nLa fonction mapview() crée ensuite une carte interactive que vous pouvez explorer en cliquant et en faisant glisser la souris pour changer le niveau de zoom et la vue.\n\n::: {.cell resultd='hide'}\n\n```{.r .cell-code}\n# Afficher les premières lignes du data.frame\narrondissements_sf <- st_as_sf(arrondissements_df, coords = c(\"lat\",\"lon\"), crs=4326)\n# Retour au format sf pour appliquer la fonction mapview()\nmapview(arrondissements_sf, zcol = c(\"c_ar\",\"l_aroff\"))\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"leaflet html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-ff5cdfda0fb503abfbec\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-ff5cdfda0fb503abfbec\">{\"x\":{\"options\":{\"minZoom\":1,\"maxZoom\":52,\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"preferCanvas\":false,\"bounceAtZoomLimits\":false,\"maxBounds\":[[[-90,-370]],[[90,370]]]},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",\"CartoDB.Positron\",\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",\"CartoDB.DarkMatter\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap\",\"OpenStreetMap\",\"OpenStreetMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",\"Esri.WorldImagery\",\"Esri.WorldImagery\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenTopoMap\",\"OpenTopoMap\",\"OpenTopoMap\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"createMapPane\",\"args\":[\"point\",440]},{\"method\":\"addCircleMarkers\",\"args\":[[48.8628723800169,48.8625627018361,48.8682792225225,48.8873265220258,48.8761300365391,48.8727208374345,48.8400853759382,48.8561744287794,48.8925692680058,48.8444431505327,48.8870759965725,48.8543414262728,48.8634605788956,48.8590592213425,48.8283880317447,48.8292445004898,48.8603921054158,48.8771635173288,48.8491303585852,48.8349743814803],[2.36000098589769,2.33644336205339,2.34280254689136,2.30677699057441,2.36072848784745,2.31255402240206,2.292825822425,2.31218769148201,2.34816051956204,2.35071460957526,2.38482096015251,2.35762962032499,2.40118812928468,2.3800583081979,2.3622724404209,2.32654204419895,2.26197078836454,2.33745754348254,2.33289799905332,2.42132490078467],6,null,\"c_ar\",{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"pane\":\"point\",\"stroke\":true,\"color\":\"#333333\",\"weight\":1,\"opacity\":[0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9],\"fill\":true,\"fillColor\":[\"#383B7A\",\"#491562\",\"#432A6F\",\"#9CD948\",\"#009597\",\"#007A96\",\"#46CA6B\",\"#006B93\",\"#9CD948\",\"#214C85\",\"#BFDE36\",\"#383B7A\",\"#DFE22B\",\"#00A193\",\"#00B884\",\"#00C279\",\"#76D25A\",\"#008898\",\"#005C8D\",\"#00AD8D\"],\"fillOpacity\":[0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6]},null,null,[\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>1&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td> 3&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>2&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td> 1&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>3&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td> 2&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>4&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td>17&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>5&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td>10&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>6&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td> 8&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>7&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td>15&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>8&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td> 7&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>9&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td>18&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>10&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td> 5&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>11&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td>19&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>12&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td> 4&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>13&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td>20&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>14&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td>11&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>15&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td>13&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>16&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td>14&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>17&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td>16&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>18&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td> 9&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>19&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td> 6&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>20&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>c_ar&emsp;<\\/th><td>12&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\"],{\"maxWidth\":800,\"minWidth\":50,\"autoPan\":true,\"keepInView\":false,\"closeButton\":true,\"closeOnClick\":true,\"className\":\"\"},[\"3\",\"1\",\"2\",\"17\",\"10\",\"8\",\"15\",\"7\",\"18\",\"5\",\"19\",\"4\",\"20\",\"11\",\"13\",\"14\",\"16\",\"9\",\"6\",\"12\"],{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]},{\"method\":\"addScaleBar\",\"args\":[{\"maxWidth\":100,\"metric\":true,\"imperial\":true,\"updateWhenIdle\":true,\"position\":\"bottomleft\"}]},{\"method\":\"addHomeButton\",\"args\":[2.26197078836454,48.8283880317447,2.42132490078467,48.8925692680058,true,\"c_ar\",\"Zoom to c_ar\",\"<strong> c_ar <\\/strong>\",\"bottomright\"]},{\"method\":\"addLegend\",\"args\":[{\"colors\":[\"#4B0055 , #491562 5.26315789473684%, #383B7A 15.7894736842105%, #005C8D 26.3157894736842%, #007A96 36.8421052631579%, #009597 47.3684210526316%, #00AD8D 57.8947368421053%, #00C279 68.4210526315789%, #76D25A 78.9473684210526%, #BFDE36 89.4736842105263%, #FDE333 100%, #FDE333 \"],\"labels\":[\"2\",\"4\",\"6\",\"8\",\"10\",\"12\",\"14\",\"16\",\"18\",\"20\"],\"na_color\":null,\"na_label\":\"NA\",\"opacity\":1,\"position\":\"topright\",\"type\":\"numeric\",\"title\":\"c_ar\",\"extra\":{\"p_1\":0.05263157894736842,\"p_n\":1},\"layerId\":null,\"className\":\"info legend\",\"group\":\"c_ar\"}]},{\"method\":\"addCircleMarkers\",\"args\":[[48.8628723800169,48.8625627018361,48.8682792225225,48.8873265220258,48.8761300365391,48.8727208374345,48.8400853759382,48.8561744287794,48.8925692680058,48.8444431505327,48.8870759965725,48.8543414262728,48.8634605788956,48.8590592213425,48.8283880317447,48.8292445004898,48.8603921054158,48.8771635173288,48.8491303585852,48.8349743814803],[2.36000098589769,2.33644336205339,2.34280254689136,2.30677699057441,2.36072848784745,2.31255402240206,2.292825822425,2.31218769148201,2.34816051956204,2.35071460957526,2.38482096015251,2.35762962032499,2.40118812928468,2.3800583081979,2.3622724404209,2.32654204419895,2.26197078836454,2.33745754348254,2.33289799905332,2.42132490078467],6,null,\"l_aroff\",{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}},\"pane\":\"point\",\"stroke\":true,\"color\":\"#333333\",\"weight\":1,\"opacity\":[0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9,0.9],\"fill\":true,\"fillColor\":[\"#BFDE36\",\"#008898\",\"#432A6F\",\"#491562\",\"#005C8D\",\"#214C85\",\"#DFE22B\",\"#00C279\",\"#383B7A\",\"#46CA6B\",\"#383B7A\",\"#007A96\",\"#00A193\",\"#9CD948\",\"#006B93\",\"#00AD8D\",\"#76D25A\",\"#00B884\",\"#009597\",\"#9CD948\"],\"fillOpacity\":[0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6,0.6]},null,null,[\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>1&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Temple&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>2&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Louvre&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>3&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Bourse&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>4&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Batignolles-Monceau&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>5&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Entrepôt&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>6&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Élysée&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>7&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Vaugirard&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>8&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Palais-Bourbon&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>9&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Buttes-Montmartre&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>10&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Panthéon&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>11&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Buttes-Chaumont&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>12&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Hôtel-de-Ville&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>13&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Ménilmontant&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>14&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Popincourt&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>15&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Gobelins&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>16&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Observatoire&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>17&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Passy&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>18&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Opéra&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>19&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Luxembourg&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\",\"<div class='scrollableContainer'><table class=mapview-popup id='popup'><tr class='coord'><td><\\/td><th><b>Feature ID&emsp;<\\/b><\\/th><td>20&emsp;<\\/td><\\/tr><tr><td>1<\\/td><th>l_aroff&emsp;<\\/th><td>Reuilly&emsp;<\\/td><\\/tr><tr><td>2<\\/td><th>geometry&emsp;<\\/th><td>sfc_POINT&emsp;<\\/td><\\/tr><\\/table><\\/div>\"],{\"maxWidth\":800,\"minWidth\":50,\"autoPan\":true,\"keepInView\":false,\"closeButton\":true,\"closeOnClick\":true,\"className\":\"\"},[\"Temple\",\"Louvre\",\"Bourse\",\"Batignolles-Monceau\",\"Entrepôt\",\"Élysée\",\"Vaugirard\",\"Palais-Bourbon\",\"Buttes-Montmartre\",\"Panthéon\",\"Buttes-Chaumont\",\"Hôtel-de-Ville\",\"Ménilmontant\",\"Popincourt\",\"Gobelins\",\"Observatoire\",\"Passy\",\"Opéra\",\"Luxembourg\",\"Reuilly\"],{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]},{\"method\":\"addHomeButton\",\"args\":[2.26197078836454,48.8283880317447,2.42132490078467,48.8925692680058,true,\"l_aroff\",\"Zoom to l_aroff\",\"<strong> l_aroff <\\/strong>\",\"bottomright\"]},{\"method\":\"addLayersControl\",\"args\":[[\"CartoDB.Positron\",\"CartoDB.DarkMatter\",\"OpenStreetMap\",\"Esri.WorldImagery\",\"OpenTopoMap\"],[\"c_ar\",\"l_aroff\"],{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]},{\"method\":\"addLegend\",\"args\":[{\"colors\":[\"#491562\",\"#44286E\",\"#3B3878\",\"#2A4782\",\"#14558A\",\"#016390\",\"#017094\",\"#017E97\",\"#008A98\",\"#009697\",\"#00A093\",\"#01AB8E\",\"#01B586\",\"#01BE7D\",\"#32C672\",\"#5DCD64\",\"#83D455\",\"#A4DA45\",\"#C2DE35\",\"#DFE22B\"],\"labels\":[\"Batignolles-Monceau\",\"Bourse\",\"Buttes-Chaumont\",\"Buttes-Montmartre\",\"Élysée\",\"Entrepôt\",\"Gobelins\",\"Hôtel-de-Ville\",\"Louvre\",\"Luxembourg\",\"Ménilmontant\",\"Observatoire\",\"Opéra\",\"Palais-Bourbon\",\"Panthéon\",\"Passy\",\"Popincourt\",\"Reuilly\",\"Temple\",\"Vaugirard\"],\"na_color\":null,\"na_label\":\"NA\",\"opacity\":1,\"position\":\"topright\",\"type\":\"factor\",\"title\":\"l_aroff\",\"extra\":null,\"layerId\":null,\"className\":\"info legend\",\"group\":\"l_aroff\"}]},{\"method\":\"addHomeButton\",\"args\":[2.26197078836454,48.8283880317447,2.42132490078467,48.8925692680058,true,null,\"Zoom to full extent\",\"<strong>Zoom full<\\/strong>\",\"bottomleft\"]}],\"limits\":{\"lat\":[48.8283880317447,48.8925692680058],\"lng\":[2.26197078836454,2.42132490078467]},\"fitBounds\":[48.8283880317447,2.26197078836454,48.8925692680058,2.42132490078467,[]]},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"function(el, x, data) {\\n  return (\\n      function(el, x, data) {\\n      // get the leaflet map\\n      var map = this; //HTMLWidgets.find('#' + el.id);\\n      // we need a new div element because we have to handle\\n      // the mouseover output separately\\n      // debugger;\\n      function addElement () {\\n      // generate new div Element\\n      var newDiv = $(document.createElement('div'));\\n      // append at end of leaflet htmlwidget container\\n      $(el).append(newDiv);\\n      //provide ID and style\\n      newDiv.addClass('lnlt');\\n      newDiv.css({\\n      'position': 'relative',\\n      'bottomleft':  '0px',\\n      'background-color': 'rgba(255, 255, 255, 0.7)',\\n      'box-shadow': '0 0 2px #bbb',\\n      'background-clip': 'padding-box',\\n      'margin': '0',\\n      'padding-left': '5px',\\n      'color': '#333',\\n      'font': '9px/1.5 \\\"Helvetica Neue\\\", Arial, Helvetica, sans-serif',\\n      'z-index': '700',\\n      });\\n      return newDiv;\\n      }\\n\\n\\n      // check for already existing lnlt class to not duplicate\\n      var lnlt = $(el).find('.lnlt');\\n\\n      if(!lnlt.length) {\\n      lnlt = addElement();\\n\\n      // grab the special div we generated in the beginning\\n      // and put the mousmove output there\\n\\n      map.on('mousemove', function (e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                           ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                           ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                           ' | zoom: ' + map.getZoom() +\\n                           ' | x: ' + L.CRS.EPSG3857.project(e.latlng).x.toFixed(0) +\\n                           ' | y: ' + L.CRS.EPSG3857.project(e.latlng).y.toFixed(0) +\\n                           ' | epsg: 3857 ' +\\n                           ' | proj4: +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs ');\\n      } else {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      }\\n      });\\n\\n      // remove the lnlt div when mouse leaves map\\n      map.on('mouseout', function (e) {\\n      var strip = document.querySelector('.lnlt');\\n      if( strip !==null) strip.remove();\\n      });\\n\\n      };\\n\\n      //$(el).keypress(67, function(e) {\\n      map.on('preclick', function(e) {\\n      if (e.originalEvent.ctrlKey) {\\n      if (document.querySelector('.lnlt') === null) lnlt = addElement();\\n      lnlt.text(\\n                      ' lon: ' + (e.latlng.lng).toFixed(5) +\\n                      ' | lat: ' + (e.latlng.lat).toFixed(5) +\\n                      ' | zoom: ' + map.getZoom() + ' ');\\n      var txt = document.querySelector('.lnlt').textContent;\\n      console.log(txt);\\n      //txt.innerText.focus();\\n      //txt.select();\\n      setClipboardText('\\\"' + txt + '\\\"');\\n      }\\n      });\\n\\n      }\\n      ).call(this.getMap(), el, x, data);\\n}\",\"data\":null},{\"code\":\"function(el, x, data) {\\n  return (function(el,x,data){\\n           var map = this;\\n\\n           map.on('keypress', function(e) {\\n               console.log(e.originalEvent.code);\\n               var key = e.originalEvent.code;\\n               if (key === 'KeyE') {\\n                   var bb = this.getBounds();\\n                   var txt = JSON.stringify(bb);\\n                   console.log(txt);\\n\\n                   setClipboardText('\\\\'' + txt + '\\\\'');\\n               }\\n           })\\n        }).call(this.getMap(), el, x, data);\\n}\",\"data\":null}]}}</script>\n```\n:::\n:::\n",
    "supporting": [
      "R_cartographie_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\r\n<script src=\"../../site_libs/jquery-1.12.4/jquery.min.js\"></script>\r\n<link href=\"../../site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/leaflet-1.3.1/leaflet.js\"></script>\r\n<link href=\"../../site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/proj4-2.6.2/proj4.min.js\"></script>\r\n<script src=\"../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\r\n<link href=\"../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/leaflet-binding-2.1.2/leaflet.js\"></script>\r\n<script src=\"../../site_libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js\"></script>\r\n<script src=\"../../site_libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js\"></script>\r\n<link href=\"../../site_libs/HomeButton-0.0.1/home-button.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/HomeButton-0.0.1/home-button.js\"></script>\r\n<script src=\"../../site_libs/HomeButton-0.0.1/easy-button-src.min.js\"></script>\r\n<script src=\"../../site_libs/clipboard-0.0.1/setClipboardText.js\"></script>\r\n<link href=\"../../site_libs/mapviewCSS-0.0.1/mapview-popup.css\" rel=\"stylesheet\" />\r\n<link href=\"../../site_libs/mapviewCSS-0.0.1/mapview.css\" rel=\"stylesheet\" />\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}